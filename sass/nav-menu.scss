.nav-menu {
  display: block;
  position: absolute;
  z-index: 10;
  background-color: $menu-bg;
  backdrop-filter: blur(20px);

  max-width: 688px;
  max-height: 0;

  left: 0;
  right: 0;
  top: 64px;

  padding-left: 1.25rem;
  padding-right: 1.25rem;
  padding-bottom: 1.063rem;
  padding-top: 20px;

  transition: all 0.3s ease-in, background 0.5s ease-in;
  transition-delay: 0.25s;

  display: none;

  &.active {
    position: absolute;
    max-height: 1000px;
    background-color: $menu-bg;

    transition: all 0.3s ease-in, background 0.5s ease-in;
    transition-delay: 0.25s;

    z-index: 10;

    .nav-menu__wrap {
      transition: scale(1) translateY(0px);
      opacity: 1;

      transition-delay: 1.29s;
    }

    .nav-list__item {
      transform: scale(1) translateY(0px);
      opacity: 1;
      @for $i from 1 through $menuItems {
        &:nth-child(#{$i}) {
          transition-delay: #{0.07 * $i + 0.2}s;
        }
      }
    }
  }

  &__wrap {
    width: 100%;
  }

  &__search {
    width: 100%;

    position: relative;
    margin-bottom: 0.938rem;

    z-index: 9999;
  }

  &__search-pic {
    display: none;
  }

  &__search-close {
    display: none;
  }

  &__search-input {
    display: inline-flex;

    width: 100%;
    height: 50px;
    background: #555555;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.15);
    border-radius: 5px;

    border: none;
    cursor: text;
    outline: none;

    -webkit-appearance:none;
    z-index: 4;

    @include font-setting($primary-font, 1rem, 1.125rem, 400, #B7B7B7);

    padding-top: 0.938rem;
    padding-bottom: 1rem;
    padding-left: 1rem;
    padding-right: 1rem;

    position: relative;
    box-sizing: border-box;
    transition: 0.1s ease-in;

    /*При активном поиске*/
    &:active,
    &:focus,
    &:hover {
      background-color: #F0EFED;
      color: $text-primary;
      transition: 0.1s ease-in;
    }
  }

  &__search-input-btn {
    display: none;
    position: absolute;

    top: 50%;
    transform: translateY(-50%);
    right: 18px;

    background-image: url("data:image/svg+xml,%3Csvg width='22' height='23' viewBox='0 0 22 23' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.48 19.7873C21.6785 19.9858 21.7778 20.2269 21.7778 20.5104C21.7778 20.794 21.6785 21.035 21.48 21.2335L20.2891 22.4245C20.0906 22.623 19.8495 22.7222 19.566 22.7222C19.2824 22.7222 19.0414 22.623 18.8429 22.4245L14.5894 18.171C14.3909 17.9725 14.2917 17.7315 14.2917 17.4479V16.7674C12.7037 18.015 10.8889 18.6389 8.84722 18.6389C6.40857 18.6389 4.32436 17.774 2.59462 16.0443C0.864873 14.3145 0 12.2303 0 9.79167C0 7.35301 0.864873 5.26881 2.59462 3.53906C4.32436 1.80932 6.40857 0.944444 8.84722 0.944444C11.2859 0.944444 13.3701 1.80932 15.0998 3.53906C16.8296 5.26881 17.6944 7.35301 17.6944 9.79167C17.6944 11.8333 17.0706 13.6481 15.8229 15.2361H16.5035C16.787 15.2361 17.0281 15.3354 17.2266 15.5339L21.48 19.7873ZM4.97656 13.6623C6.05411 14.7115 7.34433 15.2361 8.84722 15.2361C10.3501 15.2361 11.6262 14.7115 12.6753 13.6623C13.7529 12.5848 14.2917 11.2946 14.2917 9.79167C14.2917 8.28877 13.7529 7.01273 12.6753 5.96354C11.6262 4.88599 10.3501 4.34722 8.84722 4.34722C7.34433 4.34722 6.05411 4.88599 4.97656 5.96354C3.92737 7.01273 3.40278 8.28877 3.40278 9.79167C3.40278 11.2946 3.92737 12.5848 4.97656 13.6623Z' fill='%23E4D9C6'/%3E%3C/svg%3E%0A");
    background-position: 50% 50%;
    background-size: cover;
    background-repeat: no-repeat;

    width: 22px;
    height: 23px;

    border: none;
    background-color: transparent;

    z-index: 5;

    cursor: pointer;
    outline: none;
  }

  &__search-input-reset {
    display: none;
    position: absolute;
    right: 55px;

    top: 17px;
    z-index: 99;

    background-color: transparent;
    border: none;

    cursor: pointer;
    outline: none;
  }

  &__links {
    width: 100%;
    @include flex-setting(column, flex-start, center);
  }
}

@media only screen and (min-width: $tablet) {
  .nav-menu {
    &__wrap {
      max-width: 688px;
      transition: 0.2s cubic-bezier(0.000, 0.795, 0.000, 1.000);
    }

    &__search-input-reset {
      display: none;
    }
  }
}

@media only screen and (min-width: $laptop) {
  .nav-menu {
    position: relative;
    top: auto;
    height: auto;
    padding: 0;

    background-color: $upper-bg;

    flex-direction: row;
    justify-content: center;
    align-items: center;

    position: relative;

    &.active {
      position: relative;
      top: auto;
      z-index: 9;
      padding-top: 0;
      height: 39px;

      background-color: #000;

      &::before {
        position: absolute;
        content: '';

        width: 100%;
        height: 100vh;

        background-color: #666666;

        top: 39px;
        left: 0;

        z-index: 0;
      }
    }

    &__wrap {
      width: 100%;
      max-width: 100%;
      @include flex-setting(row, center, center);
    }

    &__list {
      display: none;
    }

    &__search {
      display: none;
      width: 100%;
      max-width: 840px;
      background-color: transparent;

      flex-direction: row;
      justify-content: flex-start;
      align-items: center;

      &::before {
        display: none;
      }
    }

    &__search-pic {
      display: block;
      transform: scale(0.9);
      margin-right: 1.625rem;
    }

    &__search-close {
      display: block;
      cursor: pointer;
      outline: none;

      margin-left: auto;
      margin-right: -0.625rem;
    }

    &__search-input {
      width: 392px;
      height: 22px;
      background-color: transparent;
      border: none;
      box-shadow: none;

      position: relative;

      padding-left: 0;
      padding-right: 0;

      cursor: text;
      outline: none;

      @include font-setting($title-font, 1.125rem, 1.375rem, 400, $text-secondary);

      &:active,
      &:hover,
      &:focus {
        border: none;
        background-color: transparent;
        color: $text-secondary;
      }
    }

    &__search-input-btn {
      display: none;
    }

    &__links {
      @include flex-setting(row, flex-end, center);
      width: 100%;
      transition: 0.2s cubic-bezier(0.000, 0.795, 0.000, 1.000);
      max-width: 944px;
      padding-top: 0.563rem;
      padding-bottom: 0.563rem;
    }

    &__search.active {
      display: flex;
      position: relative;
      top: auto;
      left: auto;
      transform: none;

      margin-bottom: 0;
      transition: 0.2s cubic-bezier(0.000, 0.795, 0.000, 1.000);
    }

    &__links.active {
      display: none;
      transition: 0.2s cubic-bezier(0.000, 0.795, 0.000, 1.000);
    }
  }
}

@media only screen and (min-width: $laptop-wide) {
  .nav-menu {
    &__wrap {
      max-width: 1200px;
    }

    &__links {
      max-width: 1200px;
    }
  }
}
